<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãã‚Œã¾ã¡Wi-Fiåˆ©ç”¨è€…ãƒãƒƒãƒ—</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', Meiryo, sans-serif;
        }
        
        #map-container {
            width: 100%;
            height: 100vh;
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
        }
        
        .info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            max-width: 320px;
            z-index: 1000;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .info-panel h2 {
            margin: 0 0 10px 0;
            font-size: 18px;
            color: #333;
        }
        
        .info-panel p {
            margin: 5px 0;
            font-size: 14px;
            color: #666;
        }
        
        .ranking-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }
        
        .ranking-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .ranking-item {
            display: flex;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            background: #f9f9f9;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .ranking-item:hover {
            background: #e8f5e9;
            transform: translateX(5px);
        }
        
        .ranking-number {
            font-size: 18px;
            font-weight: bold;
            width: 30px;
            text-align: center;
        }
        
        .ranking-number.gold { color: #FFD700; }
        .ranking-number.silver { color: #C0C0C0; }
        .ranking-number.bronze { color: #CD7F32; }
        
        .ranking-content {
            flex: 1;
            margin-left: 10px;
        }
        
        .ranking-name {
            font-size: 13px;
            font-weight: bold;
            color: #333;
            margin-bottom: 2px;
        }
        
        .ranking-users {
            font-size: 16px;
            font-weight: bold;
            color: #4CAF50;
        }
        
        .custom-marker {
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 10px;
            cursor: pointer;
        }
        
        .leaflet-popup-content-wrapper {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', Meiryo, sans-serif;
        }
        
        .marker-popup h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            color: #333;
        }
        
        .marker-popup p {
            margin: 5px 0;
            font-size: 13px;
            color: #666;
        }
        
        .marker-popup .users {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div id="map-container">
        <div class="info-panel">
            <h2>ãã‚Œã¾ã¡Wi-Fiåˆ©ç”¨è€…ãƒãƒƒãƒ—</h2>
            <p>ğŸ“… 2025å¹´10æœˆ1æ—¥</p>
            <p>ğŸ“ 23åœ°ç‚¹</p>
            <p>ğŸ‘¥ ç·åˆ©ç”¨è€…æ•°: <span id="total-users">-</span>äºº</p>
            
            <div class="ranking-section">
                <div class="ranking-title">ğŸ† åˆ©ç”¨è€…æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚° TOP10</div>
                <div id="ranking-list"></div>
            </div>
        </div>
        <div id="map"></div>
    </div>

    <script>
        // APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿
        const wifiData = {
            "2025/10/01": [
                {
                    "Wifiå": "é˜¿è³€ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚é˜¿è³€ä¸­å¤®ï¼–ä¸ç›®ï¼’ç•ª16å·",
                    "ç·¯åº¦": "34.23649991",
                    "çµŒåº¦": "132.6009397",
                    "åˆ©ç”¨è€…æ•°": "71"
                },
                {
                    "Wifiå": "å·å°»ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚å·å°»ç”ºæ±ï¼‘ä¸ç›®ï¼‘ç•ª21å·",
                    "ç·¯åº¦": "34.23539049",
                    "çµŒåº¦": "132.6964576",
                    "åˆ©ç”¨è€…æ•°": "64"
                },
                {
                    "Wifiå": "å®®åŸã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚å®®åŸï¼—ä¸ç›®ï¼”ç•ª21å·",
                    "ç·¯åº¦": "34.22986723",
                    "çµŒåº¦": "132.5596993",
                    "åˆ©ç”¨è€…æ•°": "50"
                },
                {
                    "Wifiå": "å®‰æµ¦ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚å®‰æµ¦ç”ºä¸­å¤®ï¼”ä¸ç›®ï¼“ç•ªï¼’å·",
                    "ç·¯åº¦": "34.28147076",
                    "çµŒåº¦": "132.7441768",
                    "åˆ©ç”¨è€…æ•°": "173"
                },
                {
                    "Wifiå": "è±Šæµœã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚è±Šæµœç”ºå¤§å­—è±Šå³¶3526ç•ªåœ°ã®15",
                    "ç·¯åº¦": "34.17632249",
                    "çµŒåº¦": "132.7987542",
                    "åˆ©ç”¨è€…æ•°": "40"
                },
                {
                    "Wifiå": "æ˜­å’Œã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚ç„¼å±±ä¸­å¤®ï¼’ä¸ç›®ï¼˜ç•ª12å·",
                    "ç·¯åº¦": "34.29673626",
                    "çµŒåº¦": "132.5576218",
                    "åˆ©ç”¨è€…æ•°": "25"
                },
                {
                    "Wifiå": "è±Šã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚è±Šç”ºå¤§é•·å­—å ‚ã®å°»5915ç•ªåœ°ï¼“",
                    "ç·¯åº¦": "34.18315233",
                    "çµŒåº¦": "132.8574754",
                    "åˆ©ç”¨è€…æ•°": "25"
                },
                {
                    "Wifiå": "æ˜­å’Œæ±ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚è‹—ä»£ç”ºå­—å…«å¹¡é‡39ç•ªåœ°ã®ï¼’",
                    "ç·¯åº¦": "34.29045852",
                    "çµŒåº¦": "132.5910808",
                    "åˆ©ç”¨è€…æ•°": "11"
                },
                {
                    "Wifiå": "éƒ·åŸã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚éƒ·åŸç”º1585ç•ªåœ°ã®ï¼˜",
                    "ç·¯åº¦": "34.30000346",
                    "çµŒåº¦": "132.636531",
                    "åˆ©ç”¨è€…æ•°": "43"
                },
                {
                    "Wifiå": "è­¦å›ºå±‹ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚è­¦å›ºå±‹ï¼’ä¸ç›®222ç•ªåœ°",
                    "ç·¯åº¦": "34.21335565",
                    "çµŒåº¦": "132.544296",
                    "åˆ©ç”¨è€…æ•°": "74"
                },
                {
                    "Wifiå": "ä»æ–¹ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚ä»æ–¹æœ¬ç”ºï¼‘ä¸ç›®ï¼–ç•ª11å·",
                    "ç·¯åº¦": "34.22393366",
                    "çµŒåº¦": "132.6525748",
                    "åˆ©ç”¨è€…æ•°": "41"
                },
                {
                    "Wifiå": "è±Šæµœã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼è±Šå³¶æ–‡é¤¨",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚è±Šæµœç”ºå¤§å­—è±Šå³¶3959ç•ªåœ°ã®ï¼‘",
                    "ç·¯åº¦": "34.17381534",
                    "çµŒåº¦": "132.7972647",
                    "åˆ©ç”¨è€…æ•°": "2"
                },
                {
                    "Wifiå": "å‰æµ¦ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚å‰æµ¦æ±æœ¬ç”ºï¼‘ä¸ç›®ï¼—ç•ª23å·",
                    "ç·¯åº¦": "34.25778813",
                    "çµŒåº¦": "132.529767",
                    "åˆ©ç”¨è€…æ•°": "82"
                },
                {
                    "Wifiå": "åºƒã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚åºƒå¤æ–°é–‹ï¼’ä¸ç›®ï¼‘ç•ªï¼“å·",
                    "ç·¯åº¦": "34.23270029",
                    "çµŒåº¦": "132.615228",
                    "åˆ©ç”¨è€…æ•°": "76"
                },
                {
                    "Wifiå": "ã¤ã°ãä¼šé¤¨ï¼ˆç”Ÿæ¶¯å­¦ç¿’ã‚»ãƒ³ã‚¿ãƒ¼ï¼‰",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚ä¸­å¤®ï¼–ä¸ç›®ï¼’ç•ªï¼™å·",
                    "ç·¯åº¦": "34.25014081",
                    "çµŒåº¦": "132.5665595",
                    "åˆ©ç”¨è€…æ•°": "142"
                },
                {
                    "Wifiå": "å‘‰å¸‚å½¹æ‰€",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚ä¸­å¤®ï¼”ä¸ç›®ï¼‘ç•ªï¼–å·",
                    "ç·¯åº¦": "34.24881375",
                    "çµŒåº¦": "132.5655759",
                    "åˆ©ç”¨è€…æ•°": "295"
                },
                {
                    "Wifiå": "å¤©å¿œã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚å¤©å¿œå®®ç”ºï¼”ç•ª15å·",
                    "ç·¯åº¦": "34.28730561",
                    "çµŒåº¦": "132.5179573",
                    "åˆ©ç”¨è€…æ•°": "155"
                },
                {
                    "Wifiå": "å€‰æ©‹ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚å€‰æ©‹ç”ºå­—å‰å®®ã®æµ¦431ç•ªåœ°",
                    "ç·¯åº¦": "34.10204849",
                    "çµŒåº¦": "132.5123973",
                    "åˆ©ç”¨è€…æ•°": "134"
                },
                {
                    "Wifiå": "å€‰æ©‹ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼ é‡£å£«ç”°åˆ†é¤¨",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚å€‰æ©‹ç”ºå­—å¤§åª7529ç•ªåœ°",
                    "ç·¯åº¦": "34.14603753",
                    "çµŒåº¦": "132.5104021",
                    "åˆ©ç”¨è€…æ•°": "45"
                },
                {
                    "Wifiå": "è’²åˆˆã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚è’²åˆˆç”ºå‘1112ç•ªåœ°29",
                    "ç·¯åº¦": "34.18757302",
                    "çµŒåº¦": "132.688376",
                    "åˆ©ç”¨è€…æ•°": "48"
                },
                {
                    "Wifiå": "ä¸‹è’²åˆˆã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚ä¸‹è’²åˆˆç”ºä¸‹å³¶1730ç•ªåœ°",
                    "ç·¯åº¦": "34.191745546485436",
                    "çµŒåº¦": "132.67478033365302",
                    "åˆ©ç”¨è€…æ•°": "8"
                },
                {
                    "Wifiå": "äºŒå·ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚ç¯‰åœ°ç”ºï¼“ç•ªï¼‘å·",
                    "ç·¯åº¦": "34.24462166",
                    "çµŒåº¦": "132.5455269",
                    "åˆ©ç”¨è€…æ•°": "29"
                },
                {
                    "Wifiå": "éŸ³æˆ¸ã¾ã¡ã¥ãã‚Šã‚»ãƒ³ã‚¿ãƒ¼",
                    "è¨­ç½®å ´æ‰€ä½æ‰€": "å‘‰å¸‚éŸ³æˆ¸ç”ºå—éš æ¸¡ï¼‘ä¸ç›®ï¼—ç•ªï¼‘å·",
                    "ç·¯åº¦": "34.1879353",
                    "çµŒåº¦": "132.5343026",
                    "åˆ©ç”¨è€…æ•°": "27"
                }
            ]
        };

        // åœ°å›³ã®åˆæœŸåŒ–
        const map = L.map('map').setView([34.25, 132.6], 11);

        // OpenStreetMapã‚¿ã‚¤ãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¿½åŠ 
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 19
        }).addTo(map);

        const locations = wifiData["2025/10/01"];
        let totalUsers = 0;
        const markers = {}; // ãƒãƒ¼ã‚«ãƒ¼ã‚’ä¿å­˜ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

        // åˆ©ç”¨è€…æ•°ã§ã‚½ãƒ¼ãƒˆ
        const sortedLocations = [...locations].sort((a, b) => parseInt(b.åˆ©ç”¨è€…æ•°) - parseInt(a.åˆ©ç”¨è€…æ•°));

        // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ
        const rankingList = document.getElementById('ranking-list');
        sortedLocations.slice(0, 10).forEach((location, index) => {
            const rankNumber = index + 1;
            let medalClass = '';
            let medal = rankNumber;
            
            if (rankNumber === 1) {
                medalClass = 'gold';
                medal = 'ğŸ¥‡';
            } else if (rankNumber === 2) {
                medalClass = 'silver';
                medal = 'ğŸ¥ˆ';
            } else if (rankNumber === 3) {
                medalClass = 'bronze';
                medal = 'ğŸ¥‰';
            }

            const rankItem = document.createElement('div');
            rankItem.className = 'ranking-item';
            rankItem.innerHTML = `
                <div class="ranking-number ${medalClass}">${medal}</div>
                <div class="ranking-content">
                    <div class="ranking-name">${location.Wifiå}</div>
                    <div class="ranking-users">${parseInt(location.åˆ©ç”¨è€…æ•°).toLocaleString()}äºº</div>
                </div>
            `;
            
            // ã‚¯ãƒªãƒƒã‚¯ã§åœ°å›³ä¸Šã®ãƒãƒ¼ã‚«ãƒ¼ã«ç§»å‹•
            rankItem.addEventListener('click', () => {
                const lat = parseFloat(location.ç·¯åº¦);
                const lng = parseFloat(location.çµŒåº¦);
                map.setView([lat, lng], 15);
                
                // ãƒãƒ¼ã‚«ãƒ¼ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã
                if (markers[location.Wifiå]) {
                    markers[location.Wifiå].openPopup();
                }
            });
            
            rankingList.appendChild(rankItem);
        });

        // ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ 
        locations.forEach(function(location) {
            const users = parseInt(location.åˆ©ç”¨è€…æ•°);
            totalUsers += users;

            // ãƒãƒ¼ã‚«ãƒ¼ã®ã‚µã‚¤ã‚ºã‚’åˆ©ç”¨è€…æ•°ã«å¿œã˜ã¦å¤‰æ›´
            const markerSize = Math.max(20, Math.min(50, users / 5));
            
            // ãƒãƒ¼ã‚«ãƒ¼ã®è‰²ã‚’åˆ©ç”¨è€…æ•°ã«å¿œã˜ã¦å¤‰æ›´
            let color = '#4CAF50'; // ç·‘
            if (users > 150) color = '#F44336'; // èµ¤
            else if (users > 100) color = '#FF9800'; // ã‚ªãƒ¬ãƒ³ã‚¸
            else if (users > 50) color = '#FFC107'; // é»„è‰²

            // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®å†…å®¹ã‚’ä½œæˆ
            const popupContent = `
                <div class="marker-popup">
                    <h3>ğŸ“¶ ${location.Wifiå}</h3>
                    <p>ğŸ“ ${location.è¨­ç½®å ´æ‰€ä½æ‰€}</p>
                    <div class="users">${location.åˆ©ç”¨è€…æ•°}äºº</div>
                    <p style="font-size: 11px; color: #999;">2025å¹´10æœˆ1æ—¥æ™‚ç‚¹</p>
                </div>
            `;

            // ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½œæˆ
            const customIcon = L.divIcon({
                className: 'custom-div-icon',
                html: `<div class="custom-marker" style="width: ${markerSize}px; height: ${markerSize}px; background-color: ${color};">${users}</div>`,
                iconSize: [markerSize, markerSize],
                iconAnchor: [markerSize / 2, markerSize / 2],
                popupAnchor: [0, -markerSize / 2]
            });

            // ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ 
            const marker = L.marker([parseFloat(location.ç·¯åº¦), parseFloat(location.çµŒåº¦)], { icon: customIcon })
                .addTo(map)
                .bindPopup(popupContent);
            
            // ãƒãƒ¼ã‚«ãƒ¼ã‚’ä¿å­˜ï¼ˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ï¼‰
            markers[location.Wifiå] = marker;
        });

        // ç·åˆ©ç”¨è€…æ•°ã‚’è¡¨ç¤º
        document.getElementById('total-users').textContent = totalUsers.toLocaleString();
    </script>
</body>
</html>
